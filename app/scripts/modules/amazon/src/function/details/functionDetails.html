<div class="details-panel">
  <div ng-if="ctrl.state.loading" class="header">
    <div class="close-button">
      <a class="btn btn-link" ui-sref="^">
        <span class="glyphicon glyphicon-remove"></span>
      </a>
    </div>
    <div class="horizontal center middle spinner-container">
      <loading-spinner size="'small'"></loading-spinner>
    </div>
  </div>

  <div ng-if="!ctrl.state.loading" class="header">
    <div class="close-button">
      <a class="btn btn-link" ui-sref="^">
        <span class="glyphicon glyphicon-remove"></span>
      </a>
    </div>
    <div class="header-text horizontal middle">
      <i class="fa icon-sitemap"></i>
      <h3 class="horizontal middle space-between flex-1" select-on-dbl-click>
        {{ctrl.function.functionName}}
        <render-if-feature feature="entityTags">
          <entity-notifications
            entity="ctrl.functionDef"
            application="ctrl.application"
            placement="bottom"
            h-offset-percent="90%"
            entity-type="function"
            page-location="details"
            on-update="ctrl.application.functions.refresh()"
          ></entity-notifications>
        </render-if-feature>
      </h3>
    </div>
    <div>
      <div class="actions">
        <function-actions
          app="ctrl.application"
          function="ctrl.functionDef"
          load-balancer-from-params="ctrl.functionFromParams"
        ></function-actions>
      </div>
    </div>
  </div>
  <managed-resource-details-indicator
    ng-if="!ctrl.state.loading && ctrl.functionDef.entityTags"
    entity-tags="[ctrl.functionDef.entityTags]"
  >
  </managed-resource-details-indicator>
  <div ng-if="!ctrl.state.loading" class="content">
    <collapsible-section heading="Function Details" expanded="true">
      <dl class="dl-horizontal dl-flex">
        <dt>Created</dt>
        <dd>{{ctrl.functionDef.createdTime | timestamp}}</dd>
        <dt>In</dt>
        <dd>
          <account-tag account="ctrl.functionDef.account" pad="right"></account-tag> {{ctrl.functionDef.region}}
        </dd>
        <dt>VPC</dt>
        <dd>
          <vpc-tag vpc-id="ctrl.functionDef.vpcId"></vpc-tag>
        </dd>
        <dt>Runtime</dt>
        <dd>{{ctrl.functionDef.runtime}}</dd>
        <dt>S3 Bucket</dt>
        <dd>{{ctrl.functionDef.s3bucket}}</dd>
        <dt>S3 Function File</dt>
        <dd>{{ctrl.functionDef.s3key}}</dd>
        <dt>Handler</dt>
        <dd>{{ctrl.functionDef.handler}}</dd>
        <dt>Execution role</dt>
        <dd>{{ctrl.functionDef.role}}</dd>
      </dl>
    </collapsible-section>
  </div>
</div>
